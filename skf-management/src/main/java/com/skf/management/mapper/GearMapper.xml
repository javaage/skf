<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.skf.management.mapper.GearMapper">
  <resultMap id="BaseResultMap" type="com.skf.management.model.GearModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jun 15 18:04:35 CST 2018.
    -->
    <id column="GEAR_CODE" jdbcType="VARCHAR" property="code" />
    <result column="GEAR_MODEL_NUMBER" jdbcType="VARCHAR" property="modelNumber" />
    <result column="GEAR_MANUFACTURE" jdbcType="VARCHAR" property="manufacture" />
    <result column="GEAR_DESCRIPTION" jdbcType="VARCHAR" property="description" />
    <result column="GEAR_MESHING_FREQUENCY" jdbcType="REAL" property="meshingFrequency" />
    <result column="GEAR_IMAGE_CODE" jdbcType="VARCHAR" property="imageCode" />
  </resultMap>
    <resultMap id="ResultPage" type="com.skf.management.entity.GearEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 22 14:56:15 CST 2018.
    -->
    <id column="GEAR_CODE" jdbcType="VARCHAR" property="code" />
    <result column="IMG_DATA" jdbcType="LONGVARBINARY" property="img" />
    <result column="IMG_CODE" jdbcType="VARCHAR" property="imgCode" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="GEAR_MODEL_NUMBER" jdbcType="VARCHAR" property="modelNumber" />
    <result column="GEAR_MANUFACTURE" jdbcType="VARCHAR" property="manufacture" />
    <result column="GEAR_DESCRIPTION" jdbcType="VARCHAR" property="description" />
    <result column="GEAR_MESHING_FREQUENCY" jdbcType="REAL" property="meshingFrequency" />
  </resultMap>
  <select id="listPage" parameterType="map" resultMap="ResultPage">  
        select 
        	sg.GEAR_CODE,
			simg.IMG_DATA,
			'DYC5555' name,
			'轴承' type,
			sg.GEAR_MODEL_NUMBER,
			sg.GEAR_MANUFACTURE,
			sg.GEAR_DESCRIPTION,
			sg.GEAR_MESHING_FREQUENCY
		from 
			skf_gear sg
		left join 
			skf_img simg on simg.IMG_CODE= sg.GEAR_IMAGE_CODE 
        limit #{stratRow},#{endRow}  
 </select>
  <select id="listPageCount" resultType="java.lang.Integer">  
        select 
        	count(sg.GEAR_CODE)
		from 
			skf_gear sg
		left join 
			skf_img simg on simg.IMG_CODE= sg.GEAR_IMAGE_CODE 
 </select>   
 
  
   <select id="getGearDetail" parameterType="java.lang.String" resultMap="ResultPage">  
         select 
        	sg.GEAR_CODE,
			simg.IMG_DATA,
			simg.IMG_CODE,
			'DYC5555' name,
			'轴承' type,
			sg.GEAR_MODEL_NUMBER,
			sg.GEAR_MANUFACTURE,
			sg.GEAR_DESCRIPTION,
			sg.GEAR_MESHING_FREQUENCY
		from 
			skf_gear sg
		left join 
			skf_img simg on simg.IMG_CODE= sg.GEAR_IMAGE_CODE 
		WHERE sg.GEAR_CODE = #{code,jdbcType=VARCHAR}
 </select>
</mapper>