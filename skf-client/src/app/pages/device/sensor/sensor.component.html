<div class="row">
  <div class="col-lg-12">
    <nb-card>
      <nb-card-header>{{sensor.code? ('EDIT_SENSOR' | translate) : ('ADD_SENSOR' | translate)}}</nb-card-header>
      <nb-card-body>
        <form #ngForm="ngForm" (ngSubmit)="submitSensor()" novalidate role="form">
          <div class="row">
            <div class="col-lg-6 form-group">
              <div class="form-group row center">
                <div class="svgContainer">
                  <svg #svgParent xmlns="http://www.w3.org/2000/svg" version="1.1" height="100%" width="100%">
                    <image [attr.xlink:href]='rootImg' x="0" y="0" height="100%" width="100%" />
                    <image *ngFor="let sensor of sensors" [attr.transform]="getRotate(sensor.angle,sensor.posX,sensor.posY,svgParent)" [attr.xlink:href]="sensor.url"
                      [attr.x]="getX(sensor.posX,sensor.width,svgParent)" [attr.y]="getY(sensor.posY,sensor.height,svgParent)"
                      [attr.height]="getWidth(sensor.height, svgParent)" [attr.width]="getHeight(sensor.width, svgParent)"
                      class="active-sensor" border="5" />
                  </svg>
                </div>
              </div>

            </div>
            <div class="col-lg-6">
              <div class="form-group row">
                <label for="inputName" class=" col-lg-3 col-form-label">{{'NAME' | translate}}
                  <span class="danger"> * </span>
                </label>
                <div class="col-lg-9">
                  <input type="text" [(ngModel)]="sensor.name" name="name" class="form-control" id="inputName" placeholder="{{'NAME_UNIQUE' | translate}}"
                    (change)="changeName()" #nameControl="ngModel" required [ngClass]="!nameControl.touched? '' : nameControl.invalid || isDuplicated? 'form-control-danger' : 'form-control-success'">
                </div>
              </div>
              <div class="form-group row">
                <label for="inputAngle" class=" col-lg-3 col-form-label">{{'ANGLE' | translate}}
                  <span class="danger"> * </span>
                </label>
                <div class="col-lg-9">
                  <input type="text" [(ngModel)]="sensor.angle" name="angle" class="form-control" id="inputAngle" placeholder="{{'ANGLE_TIP' | translate}}"
                    required isInRange [minValue]="0" [maxValue]="1" type="number" #angleControl="ngModel" [ngClass]="!angleControl.touched? '' : angleControl.invalid? 'form-control-danger' : 'form-control-success'">
                </div>
              </div>
              <div class="form-group row">
                <label for="inputPosX" class=" col-lg-3 col-form-label">{{'POS_X' | translate}}
                  <span class="danger"> * </span>
                </label>
                <div class="col-lg-9">
                  <input type="text" [(ngModel)]="sensor.posX" name="posX" class="form-control" id="inputPosX" placeholder="{{'POS_X_TIP' | translate}}"
                    required isInRange [minValue]="0" [maxValue]="1" type="number" #posXControl="ngModel" [ngClass]="!posXControl.touched? '' : posXControl.invalid? 'form-control-danger' : 'form-control-success'">
                </div>
              </div>
              <div class="form-group row">
                <label for="inputPosY" class=" col-lg-3 col-form-label">{{'POS_Y' | translate}}
                  <span class="danger"> * </span>
                </label>
                <div class="col-lg-9">
                  <input type="number" [(ngModel)]="sensor.posY" name="posY" class="form-control" id="inputPosY" placeholder="{{'POS_Y_TIP' | translate}}"
                    required isInRange [minValue]="0" [maxValue]="1" #posYControl="ngModel" [ngClass]="!posYControl.touched? '' : posYControl.invalid? 'form-control-danger' : 'form-control-success'">
                </div>
              </div>
              <div class="form-group row">
                <label for="inputSchema" class=" col-lg-3 col-form-label">{{'SCHEMA_NAME' | translate}}
                  <span class="danger"> * </span>
                </label>
                <div class="col-lg-9">
                  <select class="form-control" (change)="changeSchema()" [(ngModel)]="sensor.schemaName" name="schemaName" id="schemaName"
                    #schemaNameControl="ngModel" required [ngClass]="!schemaNameControl.touched? '' : schemaNameControl.invalid? 'form-control-danger' : 'form-control-success'">
                    <option *ngFor="let item of schemaNames" [value]="item">{{item}}</option>
                  </select>
                </div>
              </div>
              <div class="form-group row">
                <label for="inputNodeID" class=" col-lg-3 col-form-label">{{'NODE_ID' | translate}}
                  <span class="danger"> * </span>
                </label>
                <div class="col-lg-9">
                  <select class="form-control" [(ngModel)]="sensor.nodeID" name="nodeID" id="nodeID" #nodeIDControl="ngModel"
                    required [ngClass]="!nodeIDControl.touched? '' : nodeIDControl.invalid? 'form-control-danger' : 'form-control-success'">
                    <option *ngFor="let item of nodes" [value]="item.bottomId">{{item.treeString}}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div class="offset-lg-3  col-lg-3">
              <button type="submit" class="btn btn-success" [disabled]="!ngForm.form.valid || isSubmit">
                {{'SUBMIT' | translate}}</button>
            </div>
            <div class=" col-lg-3">
              <button type="button" (click)="cancel()" class="btn btn-cancle">{{'CANCEL' | translate}}</button>
            </div>
          </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>