<div class="row">
    <div class="col-lg-12">
        <nb-card>
            <nb-card-header>{{component.code? ('EDIT_COMPONENT' | translate) : ('ADD_COMPONENT' | translate)}}</nb-card-header>
            <nb-card-body>
                <form #ngForm="ngForm" (ngSubmit)="submitComponent()" novalidate role="form">
                    <div class="row">
                        <div class="col-lg-3 form-group">
                            <div class="row-center img-container3">
                                <img class="img-scale" id="imgComponent">
                            </div>

                            <div class="row-center">
                                <div style="text-align: center">
                                    <label class="col-form-label">{{'PICTURE' | translate}}
                                    </label>
                                </div>
                            </div>


                        </div>
                        <div class="col-lg-9">
                            <div class="form-group row">
                                <label for="inputName" class="col-lg-3 col-form-label">{{'NAME' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <input type="text" [(ngModel)]="component.name" name="name" class="form-control" id="inputName" placeholder="{{'NAME_UNIQUE' | translate}}"
                                        (change)="changeName()" #nameControl="ngModel" required [ngClass]="!nameControl.touched? '' : nameControl.invalid || isDuplicated? 'form-control-danger' : 'form-control-success'">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputComponentType" class="col-lg-3 col-form-label">{{'COMPONENT_TYPE' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <div class="input-group">
                                        <label class="custom-control custom-radio">
                                            <input type="radio" name="componentType" class="custom-control-input" [checked]="component.componentTypeID==1" value="1"
                                                (click)="setComponentType($event.target.value)">
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">{{'BEARING' | translate}}</span>
                                        </label>

                                        <label class="custom-control custom-radio">
                                            <input type="radio" name="componentType" class="custom-control-input" [checked]="component.componentTypeID==2" value="2"
                                                (click)="setComponentType($event.target.value)">
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">{{'GEAR' | translate}}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="inputSearch" class="col-lg-3 col-form-label">{{'SEARCH_BY_NUMBER' | translate}}
                                </label>
                                <div class="col-lg-9">
                                    <div class="row full-name-inputs">
                                        <div class="col-sm-7 input-group">
                                            <div class="input-group mail-btn-group" ngbDropdown #myDrop="ngbDropdown">
                                                <input type="text" name="search" [(ngModel)]="txtSearch" class="btn-outline-primary form-control" id="dropdownManual" ngbDropdownAnchor
                                                    placeholder="{{'SERIAL_NUMBER' | translate}}" />
                                                <div ngbDropdownMenu aria-labelledby="inputSearch">
                                                    <button *ngFor="let item of listComponent;" type="button" class="dropdown-item" (click)="selectBearingGear(item)">{{item.modelNumber}}</button>

                                                    <div *ngIf="!listComponent.length" style="min-height: 40px;padding-left: 10px;">{{'NO_DATA_FOUND' | translate}}</div>
                                                </div>
                                                <span class="input-group-append">
                                                    <button type="button" class="btn btn-primary btn-icon input-group-text" (click)="searchComponent($event,myDrop)">
                                                        <i class="icon nb-search"></i>
                                                    </button>
                                                </span>

                                            </div>
                                        </div>
                                        <div class="col-sm-5 input-group">
                                            <button type="button" *ngIf="component.componentTypeID==1" (click)="manageTable()" class="btn btn-danger">{{'BEARING_DATABASE_MANAGEMENT' | translate}}</button>
                                            <button type="button" *ngIf="component.componentTypeID==2" (click)="manageTable()" class="btn btn-danger">{{'GEAR_DATABASE_MANAGEMENT' | translate}}</button>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="inputSerialNumber" class="col-lg-3 col-form-label">{{'SERIAL_NUMBER' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <input type="text" [(ngModel)]="component.modelNumber" name="modelNumber" class="form-control" id="inputModelNumber" placeholder="{{'SEARCH_BY_NUMBER' | translate}}"
                                        required maxlength="50" #modelNumberControl="ngModel" required [ngClass]="!modelNumberControl.touched? '' : modelNumberControl.invalid? 'form-control-danger' : 'form-control-success'"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputManufacture" class="col-lg-3 col-form-label">{{'MANUFACTURE' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="text" [(ngModel)]="component.manufacture" name="manufacture" class="form-control" id="inputManufacture" placeholder="{{'MANUFACTURE' | translate}}"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputDescription" class="col-lg-3 col-form-label">{{'DESCRIPTION' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="text" [(ngModel)]="component.description" name="description" class="form-control" id="inputDescription" placeholder="{{'DESCRIPTION' | translate}}"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row" *ngIf="component.componentTypeID==2">
                                <label for="inputMeshingFrequency" class="col-lg-3 col-form-label">{{'MESHING_FREQUENCY' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.meshingFrequency" name="meshingFrequency" class="form-control" id="inputMeshingFrequency"
                                        placeholder="{{'MESHING_FREQUENCY' | translate}}" readonly>
                                </div>
                            </div>
                            <div class="form-group row" *ngIf="component.componentTypeID==1">
                                <label for="inputbpfo" class="col-lg-3 col-form-label">{{'BPFO' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.bpfo" name="bpfo" class="form-control" id="inputbpfo" placeholder="{{'BPFO' | translate}}"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row" *ngIf="component.componentTypeID==1">
                                <label for="inputbpfi" class="col-lg-3 col-form-label">{{'BPFI' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.bpfi" name="bpfi" class="form-control" id="inputbpfi" placeholder="{{'BPFI' | translate}}"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row" *ngIf="component.componentTypeID==1">
                                <label for="inputbsf" class="col-lg-3 col-form-label">{{'BSF' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.bsf" name="bsf" class="form-control" id="inputbsf" placeholder="{{'BSF' | translate}}"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row" *ngIf="component.componentTypeID==1">
                                <label for="inputftf" class="col-lg-3 col-form-label">{{'FTF' | translate}}</label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.ftf" name="ftf" class="form-control" id="inputftf" placeholder="{{'FTF' | translate}}"
                                        readonly>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputDangerLevel" class="col-lg-3 col-form-label">{{'DANGER_LEVEL' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.dangerLevel" name="dangerLevel" class="form-control" id="inputDangerLevel" placeholder="{{'DANGER_LEVEL' | translate}}"
                                        required #dangerLevelControl="ngModel" [ngClass]="!dangerLevelControl.touched? '' : dangerLevelControl.invalid? 'form-control-danger' : 'form-control-success'">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputTotalValue" class="col-lg-3 col-form-label">{{'TOTAL_VALUE' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <input type="number" [(ngModel)]="component.totalValue" name="totalValue" class="form-control" id="inputTotalValue" placeholder="{{'TOTAL_VALUE' | translate}}"
                                        required #totalValueControl="ngModel" [ngClass]="!totalValueControl.touched? '' : totalValueControl.invalid? 'form-control-danger' : 'form-control-success'">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputSpeedChoice" class="col-lg-3 col-form-label">{{'SPEED_CHOICE' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <div class="input-group">
                                        <div class="input-group">
                                            <label class="custom-control custom-radio">
                                                <input type="radio" name="speedType" class="custom-control-input" [checked]="component.speedType==1" value="1" (click)="setSpeedType($event.target.value)">
                                                <span class="custom-control-indicator"></span>
                                                <span class="custom-control-description">{{'CONSTANT_SPEED' | translate}}</span>
                                            </label>
                                        </div>
                                        <div class="input-group">
                                            <input type="number" step="0.01" [(ngModel)]="component.rotationSpeed" name="rotationSpeed" class="form-control" id="inputRotationSpeed"
                                                placeholder="{{'ROTATION_SPEED' | translate}}" required [disabled]="component.speedType!=1"
                                                #rotationSpeedControl="ngModel" [ngClass]="!rotationSpeedControl.touched? '' : rotationSpeedControl.invalid? 'form-control-danger' : 'form-control-success'">
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <div class="input-group">
                                            <label class="custom-control custom-radio">
                                                <input type="radio" name="speedType" class="custom-control-input" [checked]="component.speedType==2" value="2" (click)="setSpeedType($event.target.value)">
                                                <span class="custom-control-indicator"></span>
                                                <span class="custom-control-description">{{'BIND_SPEED' | translate}}</span>
                                            </label>
                                        </div>
                                        <div class="input-group">
                                            <input type="text" [(ngModel)]="component.schemaName" name="schemaName" class="form-control" id="schemaName" disabled>
                                        </div>
                                        <div class="input-group">
                                            <select class="form-control" (change)="changeNodeID()" [(ngModel)]="sensor.nodeID" name="nodeID" id="nodeID" #nodeIDControl="ngModel"
                                                [disabled]="component.speedType!=2" required [ngClass]="!nodeIDControl.touched? '' : nodeIDControl.invalid? 'form-control-danger' : 'form-control-success'">
                                                <option *ngFor="let item of nodes" [value]="item.bottomId">{{item.treeString}}</option>
                                            </select>
                                        </div>
                                        <div class="input-group">
                                            <label class="custom-control custom-radio">
                                                <span class="custom-control-description">{{'ROTATION_SPEED_RATIO' | translate}}</span>
                                            </label>
                                            <input type="number" [(ngModel)]="component.ratio" name="ratio" class="form-control" id="ratio" (change)="changeRatio()" required [disabled]="component.speedType!=2">
                                            
                                            <input type="text" [(ngModel)]="component.ratioMul" name="ratioMul" class="form-control" id="ratioMul" readonly style="border: none;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputSpeedChoice" class="col-lg-3 col-form-label">{{'DEFECT_TYPE' | translate}}
                                    <span class="danger"> * </span>
                                </label>
                                <div class="col-lg-9">
                                    <div class="input-group">
                                        <label class="custom-control custom-radio">
                                            <input type="radio" name="dangerType" class="custom-control-input" [checked]="component.defectType==1" value="1" (click)="setDangerType($event.target.value)">
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">{{'RANDOM_VALUE' | translate}}</span>
                                        </label>
                                    </div>
                                    <div class="input-group">
                                        <div class="input-group">
                                            <label class="custom-control custom-radio">
                                                <input type="radio" name="dangerType" class="custom-control-input" [checked]="component.defectType==2" value="2" (click)="setDangerType($event.target.value)">
                                                <span class="custom-control-indicator"></span>
                                                <span class="custom-control-description">{{'DEFECT_RANGE' | translate}}</span>
                                            </label>
                                        </div>
                                        <div class="input-group">
                                            <input type="number" step="0.01" [(ngModel)]="component.defectRange" name="defectRange" class="form-control" id="inputDefectRange"
                                                placeholder="{{'DEFECT_TYPE_TIP' | translate}}" required isInRange [minValue]="0.0000001"
                                                [maxValue]="0.5" [disabled]="component.defectType!=2" #defectRangeControl="ngModel"
                                                [ngClass]="!defectRangeControl.touched? '' : defectRangeControl.invalid? 'form-control-danger' : 'form-control-success'">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="offset-lg-3 col-lg-3">
                            <button type="submit" class="btn btn-success" [disabled]="!ngForm.form.valid || isSubmit">{{'SUBMIT' | translate}}</button>
                        </div>
                        <div class="col-lg-3">
                            <button type="button" (click)="cancel()" class="btn">{{'CANCEL' | translate}}</button>
                        </div>
                    </div>
                </form>
            </nb-card-body>
        </nb-card>
    </div>
</div>