<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.skf.management.mapper.UserMapper">
  <resultMap id="BaseResultMap" type="com.skf.management.model.UserModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jun 15 18:04:35 CST 2018.
    -->
    <id column="USR_CODE" jdbcType="VARCHAR" property="code" />
    <result column="USR_NAME" jdbcType="VARCHAR" property="name" />
    <result column="USR_COMPANY" jdbcType="VARCHAR" property="company" />
    <result column="USR_ADDRESS" jdbcType="VARCHAR" property="address" />
    <result column="USR_RL_ID" jdbcType="INTEGER" property="roleId" />
    <result column="USR_PASSWORD" jdbcType="VARCHAR" property="password" />
    <result column="USR_PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="USR_EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="USR_LOGIN_TIME" jdbcType="TIMESTAMP" property="loginTime" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.skf.management.model.UserModel">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jun 15 18:04:35 CST 2018.
    -->
    <result column="USR_IMG" jdbcType="LONGVARBINARY" property="img" />
  </resultMap>
  <resultMap id="BaseResultEntityMap" type="com.skf.management.entity.User">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jun 11 18:01:21 CST 2018.
    -->
    <id column="USR_CODE" jdbcType="VARCHAR" property="code" />
    <result column="USR_NAME" jdbcType="VARCHAR" property="name" />
    <result column="USR_COMPANY" jdbcType="VARCHAR" property="company" />
    <result column="USR_ADDRESS" jdbcType="VARCHAR" property="address" />
    <result column="USR_RL_ID" jdbcType="INTEGER" property="roleId" />
    <result column="USR_PASSWORD" jdbcType="VARCHAR" property="password" />
    <result column="USR_PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="USR_EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="USR_LOGIN_TIME" jdbcType="TIMESTAMP" property="loginTime" />
    <result column="RL_NAME" jdbcType="VARCHAR" property="roleName" />
  </resultMap>
  <select id="listPage" parameterType="map" resultMap="BaseResultEntityMap">  
    select
	    su.USR_CODE, 
			su.USR_NAME, 
			su.USR_COMPANY, 
			su.USR_ADDRESS, 
			sr.RL_NAME, 
			su.USR_PASSWORD, 
			su.USR_PHONE, 
			su.USR_EMAIL, 
			su.USR_LOGIN_TIME
    from skf_usr su
    left join skf_rl sr on sr.RL_ID=su.USR_RL_ID
    limit #{stratRow},#{endRow}  
 </select>
  <select id="listPageCount" resultType="java.lang.Integer">  
        select 
        	count(USR_CODE)
		from 
		skf_usr
 </select>     
</mapper>